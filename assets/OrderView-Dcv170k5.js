import{o as r,c,r as $,F as _,w as C,a as t,t as i,b as f,d as g,v as x,e as y,f as w,g as L}from"./index-DzMlj5Q7.js";const k=["onClick"],q={class:"d-flex w-100 justify-content-between"},D={class:"mb-1"},O={class:"mb-1"},Q={__name:"ProductListComponent",props:{data:Array},emits:["addCart"],setup(d,{emit:v}){const e=v,o=l=>{e("addCart",l)};return(l,h)=>(r(!0),c(_,null,$(d.data,p=>(r(),c("a",{href:"#",class:"list-group-item list-group-item-action",key:p.id,onClick:C(u=>o(p),["prevent"])},[t("div",q,[t("h5",D,i(p.name),1),t("small",null,"$"+i(p.price),1)]),t("p",O,i(p.description),1)],8,k))),128))}},V={class:"table"},S=["onClick"],N=["onUpdate:modelValue","onChange"],U=["value"],j={key:0,class:"alert alert-primary text-center",role:"alert"},A={key:1},B={class:"text-end mb-3"},T=["value"],F={class:"text-end"},M={__name:"CartListComponent",props:{cartList:Array,total:Number,description:String},emits:["removeDrink","updateQty","createOrder",["update:description"]],setup(d,{emit:v}){const e=v,o=u=>{e("removeDrink",u)},l=u=>{e("updateQty",u)},h=u=>u.quantity*u.price,p=()=>{e("createOrder")};return(u,m)=>(r(),c(_,null,[t("table",V,[m[1]||(m[1]=t("thead",null,[t("tr",null,[t("th",{scope:"col",width:"50"},"操作"),t("th",{scope:"col"},"品項"),t("th",{scope:"col"},"描述"),t("th",{scope:"col",width:"90"},"數量"),t("th",{scope:"col"},"單價"),t("th",{scope:"col"},"小計")])],-1)),t("tbody",null,[(r(!0),c(_,null,$(d.cartList,a=>(r(),c("tr",{key:a.id},[t("td",null,[t("button",{type:"button",class:"btn btn-sm",onClick:s=>o(a.id)}," x ",8,S)]),t("td",null,i(a.name),1),t("td",null,[t("small",null,i(a.description),1)]),t("td",null,[g(t("select",{class:"form-select","onUpdate:modelValue":s=>a.quantity=s,onChange:s=>l(a)},[(r(),c(_,null,$(10,s=>t("option",{key:s,value:s},i(s),9,U)),64))],40,N),[[x,a.quantity]])]),t("td",null,i(a.price),1),t("td",null,i(h(a)),1)]))),128))])]),d.cartList.length===0?(r(),c("div",j," 請選擇商品 ")):(r(),c("div",A,[t("div",B,[t("h5",null,[m[2]||(m[2]=f(" 總計: ")),t("span",null,"$"+i(d.total),1)])]),t("textarea",{class:"form-control mb-3",rows:"3",placeholder:"備註",value:d.description,onInput:m[0]||(m[0]=a=>u.$emit("update:description",a.target.value))},null,40,T),t("div",F,[t("button",{class:"btn btn-primary",onClick:C(p,["prevent"])},"送出")])]))],64))}},E={key:0,class:"alert alert-secondary text-center",role:"alert"},I={key:1,class:"card"},P={class:"card-body"},R={class:"card-title"},z={class:"table"},G={class:"text-end"},H={class:"text-end"},J={__name:"OrderListComponent",props:{orderList:Object},setup(d){const v=e=>e.quantity*e.price;return(e,o)=>d.orderList.id?(r(),c("div",I,[t("div",P,[t("div",R,[o[3]||(o[3]=t("h5",null,"訂單",-1)),t("table",z,[o[0]||(o[0]=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"品項"),t("th",{scope:"col"},"數量"),t("th",{scope:"col"},"小計")])],-1)),t("tbody",null,[(r(!0),c(_,null,$(d.orderList.cartList,l=>(r(),c("tr",{key:l.id},[t("td",null,i(l.name),1),t("td",null,i(l.quantity),1),t("td",null,i(v(l)),1)]))),128))])]),t("div",G,[o[1]||(o[1]=f(" 備註: ")),t("span",null,i(d.orderList.description||"無"),1)]),t("div",H,[t("h5",null,[o[2]||(o[2]=f(" 總計: ")),t("span",null,"$"+i(d.orderList.total),1)])])])])])):(r(),c("div",E," 尚未建立訂單 "))}},K={id:"root"},W={class:"container mt-5"},X={class:"row"},Y={class:"col-md-4"},Z={class:"list-group"},tt={class:"col-md-8"},et={class:"row justify-content-center"},st={class:"col-8"},ot={__name:"OrderView",setup(d){const v=y([{id:1,name:"珍珠奶茶",description:"香濃奶茶搭配QQ珍珠",price:50},{id:2,name:"冬瓜檸檬",description:"清新冬瓜配上新鮮檸檬",price:45},{id:3,name:"翡翠檸檬",description:"綠茶與檸檬的完美結合",price:55},{id:4,name:"四季春茶",description:"香醇四季春茶，回甘無比",price:45},{id:5,name:"阿薩姆奶茶",description:"阿薩姆紅茶搭配香醇鮮奶",price:50},{id:6,name:"檸檬冰茶",description:"檸檬與冰茶的清新組合",price:45},{id:7,name:"芒果綠茶",description:"芒果與綠茶的獨特風味",price:55},{id:8,name:"抹茶拿鐵",description:"抹茶與鮮奶的絕配",price:60}]),e=y([]),o=y({}),l=y(""),h=s=>{const n=e.value.find(b=>b.name===s.name);n?n.quantity++:e.value.push({...s,id:new Date().getTime(),quantity:1}),console.log(e)},p=s=>{e.value=e.value.map(n=>(n.id===s.id&&(n.quantity=+s.quantity),n)),console.log(e)},u=w(()=>e.value.reduce((s,n)=>s+n.quantity*n.price,0)),m=s=>{e.value=e.value.filter(n=>n.id!==s)},a=()=>{o.value={id:new Date().getTime(),description:l.value,cartList:e.value,total:u.value},e.value=[],l.value=""};return(s,n)=>(r(),c("div",K,[t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[L(Q,{data:v.value,onAddCart:h},null,8,["data"])])]),t("div",tt,[L(M,{cartList:e.value,description:l.value,total:u.value,onRemoveDrink:m,onUpdateQty:p,"onUpdate:description":n[0]||(n[0]=b=>l.value=b),onCreateOrder:a},null,8,["cartList","description","total"])])]),n[1]||(n[1]=t("hr",null,null,-1)),t("div",et,[t("div",st,[L(J,{orderList:o.value},null,8,["orderList"])])])])]))}};export{ot as default};
